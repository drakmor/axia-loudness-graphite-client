<html>
  <head>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
    <script src="http://benpickles.github.io/peity/jquery.peity.js"></script>
  </head>

  <style>
    body {
      background-color: #333;
    }

    #bigBox {
    width: 1300px;
    padding-top: 50px;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
    }
     
    #largeReadout {
      font-size: 45px;
      font-family: HelveticaNeue-Light;
    }

    #shortTerm {
      font-size: 20px;
    }
    
    #momentary {
      font-size: 20px;
    }

  </style>
  <body
    <div id = "bigBox">
      <span id="largeReadout"></span>
      <span class="chart">
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
          0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
      </span>
    </div>
    <script>
      var chart = $(".chart").peity("bar", {max: 5, 
                                            min: -5,
                                            height: 25,
                                            width: 1300
                                            fill: function(value){
                                                if (value < -22) && (value > -26) return "green";
                                                if (value < -26) return "blue"; 
                                                if (value > -22) return "red";
                                              }
                                           })
      var socket = io.connect();
      socket.on('LUFS', function(data){
          var values = chart.text().split(",");
          values.shift();
          values.push(Number(data.shortTerm));
          chart.text(values.join(",")).change();

          var loudness = Number(data.shortTerm);
          $('#largeReadout').text(loudness);
          } 
      });
    </script>
  </body>
</html>
